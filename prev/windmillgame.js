!function(e){function t(t){for(var n,r,s=t[0],l=t[1],d=t[2],u=0,g=[];u<s.length;u++)r=s[u],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&g.push(o[r][0]),o[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(c&&c(t);g.length;)g.shift()();return i.push.apply(i,d||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,s=1;s<a.length;s++){var l=a[s];0!==o[l]&&(n=!1)}n&&(i.splice(t--,1),e=r(r.s=a[0]))}return e}var n={},o={3:0},i=[];function r(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=n,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var c=l;i.push([332,0]),a()}({209:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));class n{constructor(){this.currState=null}switchState(e){this.currState!=e&&(null!=this.currState&&null!=this.currState.leave&&this.currState.leave(),this.currState=e,null!=this.currState&&null!=this.currState.enter&&this.currState.enter())}update(){null!=this.currState&&null!=this.currState.update&&this.currState.update()}}},332:function(e,t,a){"use strict";a.r(t);var n=a(10),o=a(18),i=(a(214),a(110)),r=a(26),s=a(77),l=a(145),d=a(147),c=(a(29),a(36)),u=a(184),g=(a(224),a(73)),h=a(134),p=(a(225),a(79)),w=a(202),f=a(129),v=a(159),m=a(59),x=a(16),b=a(63),S=a(83),y=a(37),T=a(173),P=a(166),M=a(125),O=a(94),B=a(126),C=(a(135),a(302),a(60));function k(e){for(var t,a=e.inputBuffer.getChannelData(0),n=a.length,o=0,i=0;i<n;i++)t=a[i],Math.abs(t)>=this.clipLevel&&(this.clipping=!0,this.lastClip=window.performance.now()),o+=t*t;var r=Math.sqrt(o/n);this.volume=Math.max(r,this.volume*this.averaging)}console.log("Executing volume-meter.js"),console.log("Executing volume_reader.js");var A=null,E=null;function I(){alert("Stream generation failed.")}window.onload=function(){window.AudioContext=window.AudioContext||window.webkitAudioContext,A=new AudioContext;try{navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,navigator.getUserMedia({audio:{mandatory:{googEchoCancellation:"false",googAutoGainControl:"false",googNoiseSuppression:"false",googHighpassFilter:"false"},optional:[]}},N,I)}catch(e){alert("getUserMedia threw exception :"+e)}};var L=null;function N(e){L=A.createMediaStreamSource(e),E=function(e,t,a,n){var o=e.createScriptProcessor(512);return o.onaudioprocess=k,o.clipping=!1,o.lastClip=0,o.volume=0,o.clipLevel=t||.98,o.averaging=a||.95,o.clipLag=n||750,o.connect(e.destination),o.checkClipping=function(){return!!this.clipping&&(this.lastClip+this.clipLag<window.performance.now()&&(this.clipping=!1),this.clipping)},o.shutdown=function(){this.disconnect(),this.onaudioprocess=null},o}(A),L.connect(E),_()}function _(e){window.requestAnimationFrame(_)}var z=a(209),F=0,R=0;!async function(){const e=document.getElementById("renderCanvas");i.a.DefaultLogoUrl="assets/JADI_2020_logo.png",i.a.DefaultSpinnerUrl="assets/JADI_spinner.svg";const t=new n.a(e);var a=await async function(e,t){var a=new o.a(t);a.createDefaultEnvironment({groundTexture:"assets/backgroundGround.png",skyboxTexture:"assets/backgroundSkybox.dds",environmentTexture:"assets/environmentSpecular.env",enableGroundShadow:!0,groundYBias:1}).setMainColor(r.b.FromHexString("#74b9ff"));var n=new l.a("light",new r.g(0,-.5,1),a);n.position=new r.g(0,5,-2);var i=new g.a(1024,n);i.bias=1e-5,i.normalBias=.01,i.useBlurExponentialShadowMap=!0,i.blurKernel=32;var k=new s.a("camera",-2,1,3,new r.g(0,1.6,0),a);k.panningAxis=r.g.Zero(),k.lowerBetaLimit=1,k.upperBetaLimit=2,k.lowerAlphaLimit=-2,k.upperAlphaLimit=-1,k.lowerRadiusLimit=2,k.upperRadiusLimit=4,k.useBouncingBehavior=!0,k.bouncingBehavior.lowerRadiusTransitionRange=.5,k.bouncingBehavior.upperRadiusTransitionRange=-.5,k.attachControl(e,!0);var I=new u.a(a);I.addMeshTask("windmill task","","assets/","WindTurbine_v.glb"),I.addMeshTask("van task","","assets/","van_v1_c.glb"),I.addMeshTask("van task","","assets/","hawk_v_c.glb"),I.addImageTask("backicon task","assets/arrow-left-solid.svg"),I.addImageTask("muteicon task","assets/microphone-slash-solid.svg"),I.addImageTask("windmeter task","assets/windmeter.jpg");var L=I.addBinaryFileTask("font","assets/Oswald-Medium.ttf");await I.loadAsync();var N=new FontFace("Oswald",L.data);document.fonts.add(N),console.log("Fontloaded");var _=a.getMeshByName("__root__");_.rotation=new r.g(0*Math.PI/2,-1*Math.PI/2,0*Math.PI/2);var U=a.getMeshByName("axis");U.rotationQuaternion=null,U.isBlocker=!0;var j=a.getMaterialByName("city_light"),G=a.getMaterialByName("city_base"),D=a.getNodeByName("city").getChildMeshes(),W=0,H=a.getMeshByName("base");i.getShadowMap().renderList.push(H),H.receiveShadows=!0,i.addShadowCaster(_,!0),H.isBlocker=!0,a.getMeshByName("wing 1").isBlocker=!0,a.getMeshByName("wing 2").isBlocker=!0,a.getMeshByName("wing 3").isBlocker=!0;var X=a.getMeshByName("display"),Y=T.a.CreateForMesh(X);X.isPickable=!1;var J=new O.a;J.width="1024px",J.fontSize=340,J.text="100%",J.fontFamily="Oswald",J.color="white",J.alpha=.3,Y.addControl(J);var K=a.getNodeByName("van_body").parent;K.rotation=new r.g(0*Math.PI/2,1*Math.PI/4,0*Math.PI/2),K.position.x+=.5,K.scaling.scaleInPlace(.06),i.addShadowCaster(K,!0);var V=a.getNodeByName("hawk").parent;V.scaling.scaleInPlace(.03),i.addShadowCaster(V,!0);var Z=new c.a("pathWalker",a);V.parent=Z,V.rotationQuaternion=null,V.rotation.y=-Math.PI/2,V.rotation.z=-Math.PI/2;for(var q=0,Q=[],$=550,ee=0;ee<551;ee++)Q.push(new r.g((3+.6*Math.sin(8*ee*Math.PI/$))*Math.sin(2*ee*Math.PI/$),4.5,(3+.3*Math.sin(6*ee*Math.PI/$))*Math.cos(2*ee*Math.PI/$)));var te=new S.d(Q),ae=new d.a("Omni0",new r.g(1,4,3),a);ae.setEnabled(!1);var ne=new h.a("lensFlareSystem",ae,a);p.a.AddFlare(.2,0,new r.b(1,1,1),"assets/lens5.png",ne),p.a.AddFlare(.5,.2,new r.b(.5,.5,1),"assets/lens4.png",ne),p.a.AddFlare(.2,1,new r.b(1,1,1),"assets/lens4.png",ne),p.a.AddFlare(.4,.4,new r.b(1,.5,1),"assets/Flare.png",ne),p.a.AddFlare(.1,.6,new r.b(1,1,1),"assets/lens5.png",ne),p.a.AddFlare(.3,-.4,new r.b(1,1,1),"assets/lens4.png",ne);var oe=new c.a("PSSource");oe.position.y=2,oe.position.z=-2,oe.rotation.x=Math.PI/2;var ie=new m.a("particles",2e3,a);ie.particleTexture=new w.a("assets/Flare.png",a),ie.emitter=oe,ie.minEmitBox=new r.g(-1,0,-1),ie.maxEmitBox=new r.g(1,0,1),ie.color1=new r.c(.7,.8,1,1),ie.color2=new r.c(.2,.5,1,1),ie.colorDead=new r.c(0,0,.2,0),ie.minSize=.01,ie.maxSize=.06,ie.minLifeTime=.3,ie.maxLifeTime=2.5,ie.emitRate=0,ie.blendMode=m.a.BLENDMODE_ONEONE,ie.gravity=new r.g(0,0,0),ie.minEmitPower=1,ie.maxEmitPower=3,ie.updateSpeed=.005,ie.start();var re=new f.a("processing",1,k);re.vignetteWeight=6,re.vignetteStretch=2,re.vignetteColor=new r.c(0,0,0,0),re.vignetteEnabled=!0,new v.a("glow",a,{mainTextureFixedSize:512}).intensity=.9;var se=T.a.CreateFullscreenUI("fsGUI"),le=new P.a("windmeterbg");le.verticalAlignment=y.a.VERTICAL_ALIGNMENT_BOTTOM,le.width="335px",le.height="48px",le.paddingBottom="10px",le.transformCenterX=0,se.addControl(le);var de=new M.a("windmeter","assets/windmeter.jpg");de.verticalAlignment=y.a.VERTICAL_ALIGNMENT_BOTTOM,de.width="335px",de.height="48px",de.paddingBottom="10px",de.transformCenterX=0,se.addControl(de);var ce=B.a.CreateImageOnlyButton("micicon","assets/microphone-slash-solid.svg");ce.thickness=0,ce.verticalAlignment=y.a.VERTICAL_ALIGNMENT_TOP,ce.horizontalAlignment=y.a.HORIZONTAL_ALIGNMENT_RIGHT,ce.width="60px",ce.height="60px",ce.paddingBottom="10px",ce.paddingLeft="10px",ce.paddingTop="10px",ce.paddingRight="10px",ce.onPointerUpObservable.add((function(){A.resume().then(()=>{console.log("Playback resumed successfully")})}));var ue=B.a.CreateImageOnlyButton("backicon","assets/arrow-left-solid.svg");function ge(e){var t=335*e;de.left=t/2-167.5,de.width=t+"px",de.sourceWidth=t}ue.thickness=0,ue.verticalAlignment=y.a.VERTICAL_ALIGNMENT_TOP,ue.horizontalAlignment=y.a.HORIZONTAL_ALIGNMENT_LEFT,ue.width="60px",ue.height="60px",ue.paddingTop="10px",ue.paddingLeft="10px",ue.onPointerUpObservable.add((function(){window.open("tour.html","_self")})),se.addControl(ue);var he=new z.a,pe={enter:function(){if(console.log("Entering start state"),D.forEach(e=>{e.material=G}),W=0,ge(0),R=0,null==this.tutText){this.textPos={left:0,top:0,fontSize:64,lineSpacing:-30};var e=new O.a;e.textWrapping=!0,e.lineSpacing=this.textPos.lineSpacing,e.paddingLeft=e.paddingRight=.1,e.fontFamily="Oswald",e.text="Blow on your device's microphone to generate energy!",e.color="white",e.shadowBlur=3,e.shadowOffsetX=e.shadowOffsetY=3,e.fontSize=this.textPos.fontSize,e.left=this.textPos.left,e.top=this.textPos.top,se.addControl(e),this.tutText=e}else new C.a.Tween(this.textPos).to({left:0,top:0,fontSize:64,lineSpacing:-30},500).easing(C.a.Easing.Cubic.Out).onUpdate(()=>{this.tutText.left=this.textPos.left,this.tutText.top=this.textPos.top,this.tutText.fontSize=this.textPos.fontSize,this.tutText.lineSpacing=this.textPos.lineSpacing}).start();var t=new O.a;t.fontFamily="Oswald",t.text="Tap/click to start!",t.color="white",t.textWrapping=!0,t.lineSpacing=-30,t.paddingLeft=e.paddingRight=.1,t.shadowBlur=3,t.shadowOffsetX=t.shadowOffsetY=3,t.fontSize=.6*this.textPos.fontSize,t.left=this.textPos.left,t.top="200px",se.addControl(t),this.tapText=t,this.pointerObserver=a.onPointerObservable.add(e=>{e.type==x.a.POINTERDOWN&&(he.switchState(we),null!=A&&"running"!=A.state&&A.resume().then(()=>{console.log("Playback resumed successfully")}))}),this.kbObserver=a.onKeyboardObservable.add(e=>{e.type==b.a.KEYDOWN&&he.switchState(we)})},leave:function(){console.log("Leaving start state"),a.onPointerObservable.remove(this.pointerObserver),a.onKeyboardObservable.remove(this.kbObserver),se.removeControl(this.tapText);new C.a.Tween(this.textPos).to({left:0,top:230,fontSize:24,lineSpacing:-10},1e3).easing(C.a.Easing.Cubic.Out).onUpdate(()=>{this.tutText.left=this.textPos.left,this.tutText.top=this.textPos.top,this.tutText.fontSize=this.textPos.fontSize,this.tutText.lineSpacing=this.textPos.lineSpacing}).start()}},we={enter:function(){console.log("Entering gameplay state")},update:function(){null!=A&&"running"==A.state?se.removeControl(ce):se.addControl(ce),null!=E&&(ge(E.volume),F<E.volume&&(F=E.volume)),(R+=1.3*F)>=100&&(R=100,he.switchState(fe));for(var e=R/(100/D.length);e>W;)D[W].material=j,W++},leave:function(){console.log("Leaving gameplay state")}},fe={enter:function(){console.log("Entering end state"),this.textPos={fontSize:0};var e=new O.a;e.fontFamily="Oswald",e.text="Congratulations!",e.color="white",e.shadowBlur=3,e.shadowOffsetX=e.shadowOffsetY=3,e.fontSize=this.textPos.fontSize,e.isPointerBlocker=!1,e.zIndex=-10,se.addControl(e),this.gratText=e;new C.a.Tween(this.textPos).to({fontSize:64},1e3).easing(C.a.Easing.Back.Out).onUpdate(()=>{this.gratText.fontSize=this.textPos.fontSize}).start()},leave:function(){console.log("Leaving end state"),se.removeControl(this.gratText)}};return he.switchState(pe),a.onBeforeRenderObservable.add(()=>{he.update(),C.a.update(),U&&(U.rotation.x+=.06*F*a.getEngine().getDeltaTime()),ie.emitRate=1e3*F,ie.minEmitPower=10*F+5,ie.maxEmitPower=50*F+20,F*=.99,J&&(J.text=R.toFixed(1)+"%"),Z.position=te.getPointAt(q);var e=r.g.RotationFromAxis(te.getTangentAt(q),te.getNormalAt(q),te.getBinormalAt(q));Z.rotation=e,q+=1/1200,q-=Math.floor(q)}),a}(e,t);window.addEventListener("resize",(function(){t.resize()})),t.runRenderLoop(()=>{a.render()})}()}});